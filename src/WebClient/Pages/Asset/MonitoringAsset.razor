@page "/monitoring"


<h3>Asset Monitoring Dashboard</h3>

@if (_assetsMonitoring == null)
{
    <p>Loading...</p>
}
else
{
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        @foreach (var site in _assetsMonitoring)
        {
            <div class="card border shadow p-4 rounded-lg">
                <p><strong>Username:</strong> @site.UserName</p>
                <p><strong>Site:</strong> @site.SiteName</p>
                <p><strong>Location:</strong> @site.SiteLocation</p>

                <hr class="my-2" />

                <div class="mb-2">
                    <h5 class="font-semibold">Solar Panel</h5>
                    <p>Active Power: @site.Solar.ActivePower kW</p>
                    <p>Set Point: @site.Solar.SetPoint kW</p>
                    <p>Irradiance: @site.Solar.Irradiance W/m²</p>
                </div>

                <div class="mb-2">
                    <h5 class="font-semibold">Wind Turbine</h5>
                    <p>Active Power: @site.Turbine.ActivePower kW</p>
                    <p>Set Point: @site.Turbine.SetPoint kW</p>
                    <p>Wind Speed: @site.Turbine.WindSpeed m/s</p>
                </div>

                <div>
                    <h5 class="font-semibold">Battery</h5>
                    <p>State Charge: @site.Battery.StateCharge / @site.Battery.Capacity kW</p>
                    <p>Set Point: @site.Battery.SetPoint kW</p>
                    <p>Status: @site.Battery.Message</p>

                    <div class="w-full bg-gray-300 h-4 rounded mt-1">
                        <div class="bg-green-500 h-4 rounded" style="width:@(site.Battery.Capacity > 0 ? (site.Battery.StateCharge / site.Battery.Capacity * 100) : 0)%"></div>
                    </div>
                </div>
            </div>
        }
    </div>

}